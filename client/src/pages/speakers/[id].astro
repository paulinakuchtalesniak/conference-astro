---
import BaseLayout from "../../layouts/BaseLayout.astro";
import SpeakerTemplate from "../../components/SpeakerTemplate.astro";
import fetchApi from "../../lib/strapi";

export async function getStaticPaths() {
const speakers = await fetchApi({
  endpoint: "speakers",
  wrappedByKey: "data",
   query: {
    populate: ["photo","location", "tags"],
    
  },

});

  const paths = speakers.map((speaker, i) => ({
    params: { id: speaker.id.toString() },
    props: {
     speaker,
    },
    
    
  }));

  return paths;
}

const { speaker } = Astro.props;
---

<BaseLayout>

   <SpeakerTemplate speaker={speaker} />
     
</BaseLayout>